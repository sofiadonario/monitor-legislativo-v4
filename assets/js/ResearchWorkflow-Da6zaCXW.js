import{j as e}from"./index-pOYXcLgf.js";import{r as s}from"./leaflet-vendor-CuwtxqHJ.js";import{G as t}from"./GlassCard-CJABr-IK.js";import"./react-vendor-DFJYf2oa.js";var a=Object.defineProperty,l=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,s,t)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,d=({className:a="",onProjectChange:d})=>{const[m,x]=s.useState(null),[g,h]=s.useState([]),[p,u]=s.useState("overview"),[j,b]=s.useState(null),[v,N]=s.useState(!1),[y,f]=s.useState(!1),[w,k]=s.useState(""),[D,S]=s.useState([]),[C,P]=s.useState(!1);s.useRef(null),s.useEffect(()=>{const e=localStorage.getItem("research_projects");if(e)try{const s=JSON.parse(e);h(s),s.length>0&&!m&&x(s[0])}catch(s){console.error("Error loading research projects:",s)}},[]);const _=e=>{h(e),localStorage.setItem("research_projects",JSON.stringify(e))},O=(null==m?void 0:m.notes.filter(e=>{const s=!w||e.title.toLowerCase().includes(w.toLowerCase())||e.content.toLowerCase().includes(w.toLowerCase()),t=0===D.length||D.some(s=>e.tags.includes(s));return s&&t}))||[],A=m?{totalNotes:m.notes.length,totalDocuments:m.documents.length,bibliographyItems:m.bibliography.length,completionPercentage:Math.round(100*(m.progress||0)),criticalNotes:m.notes.filter(e=>"critical"===e.importance).length,recentActivity:m.notes.filter(e=>{const s=new Date(e.last_modified),t=new Date;return t.setDate(t.getDate()-7),s>t}).length}:null;return m||0!==g.length?e.jsxs("div",{className:`research-workflow ${a}`,children:[e.jsx(t,{variant:"academic",className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:null==m?void 0:m.title}),e.jsx("span",{className:`\n                px-3 py-1 rounded-full text-sm font-medium\n                ${"active"===(null==m?void 0:m.status)?"bg-green-100 text-green-700":"completed"===(null==m?void 0:m.status)?"bg-blue-100 text-blue-700":"planning"===(null==m?void 0:m.status)?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}\n              `,children:"active"===(null==m?void 0:m.status)?"Ativo":"completed"===(null==m?void 0:m.status)?"Concluído":"planning"===(null==m?void 0:m.status)?"Planejamento":"Arquivado"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:null==m?void 0:m.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:null==m?void 0:m.tags.map(s=>e.jsx("span",{className:"glass-badge text-sm",children:s},s))}),A&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-blue-600",children:A.totalNotes}),e.jsx("div",{className:"text-gray-600",children:"Notas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-green-600",children:A.bibliographyItems}),e.jsx("div",{className:"text-gray-600",children:"Bibliografia"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-lg text-purple-600",children:[A.completionPercentage,"%"]}),e.jsx("div",{className:"text-gray-600",children:"Progresso"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-orange-600",children:A.recentActivity}),e.jsx("div",{className:"text-gray-600",children:"Atividade 7d"})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>N(!0),className:"glass-button-secondary px-3 py-2 text-sm",children:"🔄 Trocar Projeto"}),e.jsx("button",{onClick:()=>f(!0),className:"glass-button-primary px-3 py-2 text-sm",children:"➕ Nova Nota"})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:[{key:"overview",label:"📊 Visão Geral",icon:"📊"},{key:"documents",label:"📄 Documentos",icon:"📄"},{key:"notes",label:"📝 Notas",icon:"📝"},{key:"bibliography",label:"📚 Bibliografia",icon:"📚"},{key:"writing",label:"✍️ Redação",icon:"✍️"},{key:"collaboration",label:"👥 Colaboração",icon:"👥"}].map(s=>e.jsx("button",{onClick:()=>u(s.key),className:`\n              px-4 py-2 rounded-lg font-medium transition-all\n              ${p===s.key?"glass-card bg-blue-50 text-blue-700 border-blue-200":"glass-button-secondary"}\n            `,children:s.label},s.key))}),"overview"===p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{variant:"analysis",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"📈 Progresso do Projeto"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progresso Geral"}),e.jsxs("span",{children:[null==A?void 0:A.completionPercentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${null==A?void 0:A.completionPercentage}%`}})})]})})]}),e.jsxs(t,{variant:"research",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"⚡ Atividade Recente"}),e.jsx("div",{className:"space-y-3",children:null==m?void 0:m.notes.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:`\n                    w-2 h-2 rounded-full\n                    ${"critical"===s.importance?"bg-red-500":"high"===s.importance?"bg-orange-500":"medium"===s.importance?"bg-yellow-500":"bg-green-500"}\n                  `}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(s.last_modified).toLocaleDateString("pt-BR")})]}),e.jsx("span",{className:"glass-badge text-xs",children:s.type})]},s.id))})]})]}),"notes"===p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{variant:"research",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"Buscar nas notas...",className:"glass-input"})}),e.jsx("button",{onClick:()=>P(!C),className:"glass-button-secondary px-4 py-2",children:"🔍 Filtros"})]}),C&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Importância"}),e.jsxs("select",{className:"glass-input text-sm",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"critical",children:"Crítica"}),e.jsx("option",{value:"high",children:"Alta"}),e.jsx("option",{value:"medium",children:"Média"}),e.jsx("option",{value:"low",children:"Baixa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{className:"glass-input text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"general",children:"Geral"}),e.jsx("option",{value:"annotation",children:"Anotação"}),e.jsx("option",{value:"insight",children:"Insight"}),e.jsx("option",{value:"citation",children:"Citação"}),e.jsx("option",{value:"methodology",children:"Metodologia"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Período"}),e.jsxs("select",{className:"glass-input text-sm",children:[e.jsx("option",{value:"",children:"Todo período"}),e.jsx("option",{value:"today",children:"Hoje"}),e.jsx("option",{value:"week",children:"Esta semana"}),e.jsx("option",{value:"month",children:"Este mês"})]})]})]})})]}),e.jsx("div",{className:"grid gap-4",children:O.map(s=>e.jsx(t,{variant:"light",className:"hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-bold text-lg",children:s.title}),e.jsx("span",{className:`\n                        w-3 h-3 rounded-full\n                        ${"critical"===s.importance?"bg-red-500":"high"===s.importance?"bg-orange-500":"medium"===s.importance?"bg-yellow-500":"bg-green-500"}\n                      `})]}),e.jsxs("p",{className:"text-gray-600 mb-3 line-clamp-3",children:[s.content.substring(0,200),"..."]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.tags.map(s=>e.jsx("span",{className:"glass-badge text-xs",children:s},s)),e.jsx("span",{className:"glass-badge text-xs bg-blue-100 text-blue-700",children:s.type})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Modificado em ",new Date(s.last_modified).toLocaleDateString("pt-BR")]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>b(s),className:"glass-button-secondary px-3 py-1 text-sm",children:"📖 Ver"}),e.jsx("button",{className:"glass-button-secondary px-3 py-1 text-sm",children:"✏️ Editar"})]})]})},s.id))})]}),"bibliography"===p&&e.jsxs(t,{variant:"academic",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"📚 Bibliografia do Projeto"}),0===(null==m?void 0:m.bibliography.length)?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum item na bibliografia ainda"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use a pesquisa para adicionar documentos à sua bibliografia"})]}):e.jsx("div",{className:"space-y-4",children:null==m?void 0:m.bibliography.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold",children:s.title}),e.jsx("span",{className:`\n                      px-2 py-1 rounded text-xs font-medium\n                      ${"primary"===s.importance?"bg-red-100 text-red-700":"secondary"===s.importance?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}\n                    `,children:s.importance})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Fonte:"})," ",s.source]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Data:"})," ",s.date]}),s.authors.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Autores:"})," ",s.authors.join(", ")]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"ABNT:"})," ",s.citation_abnt]})]},s.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(t,{variant:"academic",className:"w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nova Nota de Pesquisa"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.target);(e=>{if(!m)return;const s={id:`note_${Date.now()}`,title:e.title||"Nova Nota",content:e.content||"",document_id:e.document_id,document_section:e.document_section,tags:e.tags||[],created_date:(new Date).toISOString(),last_modified:(new Date).toISOString(),type:e.type||"general",importance:e.importance||"medium",highlights:[]},t=(a=((e,s)=>{for(var t in s||(s={}))r.call(s,t)&&c(e,t,s[t]);if(n)for(var t of n(s))o.call(s,t)&&c(e,t,s[t]);return e})({},m),d={notes:[...m.notes,s],last_modified:(new Date).toISOString()},l(a,i(d)));var a,d;const h=g.map(e=>e.id===m.id?t:e);_(h),x(t),f(!1)})({title:s.get("title"),content:s.get("content"),type:s.get("type"),importance:s.get("importance"),tags:s.get("tags").split(",").map(e=>e.trim()).filter(Boolean)})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título da Nota"}),e.jsx("input",{name:"title",type:"text",required:!0,className:"glass-input",placeholder:"Ex: Análise do Art. 5º da Lei 12.587/2012"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Nota"}),e.jsxs("select",{name:"type",className:"glass-input",children:[e.jsx("option",{value:"general",children:"Geral"}),e.jsx("option",{value:"annotation",children:"Anotação"}),e.jsx("option",{value:"insight",children:"Insight"}),e.jsx("option",{value:"citation",children:"Citação"}),e.jsx("option",{value:"methodology",children:"Metodologia"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Importância"}),e.jsxs("select",{name:"importance",className:"glass-input",children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"Média"}),e.jsx("option",{value:"high",children:"Alta"}),e.jsx("option",{value:"critical",children:"Crítica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (separadas por vírgula)"}),e.jsx("input",{name:"tags",type:"text",className:"glass-input",placeholder:"transporte, regulamentação, política"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conteúdo da Nota"}),e.jsx("textarea",{name:"content",rows:10,required:!0,className:"glass-input",placeholder:"Digite o conteúdo da sua nota de pesquisa..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"glass-button-primary flex-1",children:"Criar Nota"}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"glass-button-secondary flex-1",children:"Cancelar"})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(t,{variant:"academic",className:"w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:j.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"glass-badge",children:j.type}),e.jsx("span",{className:`\n                    px-2 py-1 rounded text-xs font-medium\n                    ${"critical"===j.importance?"bg-red-100 text-red-700":"high"===j.importance?"bg-orange-100 text-orange-700":"medium"===j.importance?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}\n                  `,children:j.importance})]})]}),e.jsx("button",{onClick:()=>b(null),className:"glass-button-secondary px-3 py-2",children:"✕ Fechar"})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:j.content})}),j.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:j.tags.map(s=>e.jsx("span",{className:"glass-badge",children:s},s))}),e.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["Criado em ",new Date(j.created_date).toLocaleDateString("pt-BR")," • Modificado em ",new Date(j.last_modified).toLocaleDateString("pt-BR")]})]})})]}):e.jsxs("div",{className:`research-workflow ${a}`,children:[e.jsxs(t,{variant:"academic",className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Bem-vindo ao Fluxo de Pesquisa Acadêmica"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Organize sua pesquisa legislativa com ferramentas acadêmicas profissionais"}),e.jsx("button",{onClick:()=>N(!0),className:"glass-button-primary px-6 py-3 text-lg",children:"🚀 Criar Primeiro Projeto"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(t,{variant:"academic",className:"w-full max-w-2xl mx-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Novo Projeto de Pesquisa"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.target);(e=>{const s={id:`project_${Date.now()}`,title:e.title||"Novo Projeto de Pesquisa",description:e.description||"",status:"planning",created_date:(new Date).toISOString(),last_modified:(new Date).toISOString(),tags:e.tags||[],documents:[],notes:[],bibliography:[],collaborators:[],progress:0,metadata:{}},t=[...g,s];_(t),x(s),N(!1),d&&d(s)})({title:s.get("title"),description:s.get("description"),tags:s.get("tags").split(",").map(e=>e.trim()).filter(Boolean)})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título do Projeto"}),e.jsx("input",{name:"title",type:"text",required:!0,className:"glass-input",placeholder:"Ex: Regulamentação do Transporte Urbano no Brasil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{name:"description",rows:3,className:"glass-input",placeholder:"Descreva os objetivos e escopo da sua pesquisa..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (separadas por vírgula)"}),e.jsx("input",{name:"tags",type:"text",className:"glass-input",placeholder:"transporte, regulamentação, urbano"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"glass-button-primary flex-1",children:"Criar Projeto"}),e.jsx("button",{type:"button",onClick:()=>N(!1),className:"glass-button-secondary flex-1",children:"Cancelar"})]})]})]})})]})};export{d as default};
